{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,mECAAC,EAAAD,EAAA,S,+FCGO,SAASE,IAChBC,SAASC,cAAc,QAAQC,mBAAmB,aAHlC,kiB,CAMT,SAASC,IAChBH,SAASC,cAAc,QAAQG,YAAYJ,SAASC,cAAc,uB,OCMlE,SAASI,EAASC,EAAMC,EAAMC,GAC5B,IAAIC,EAASC,EAAMC,EAASC,EAAWC,EAGvC,SAASC,IACP,IAAIC,EAAOC,KAAKC,MAAQL,EAEpBG,EAAOR,GAAQQ,GAAQ,EACzBN,EAAUS,WAAWJ,EAAOP,EAAOQ,IAEnCN,EAAU,KACLD,IACHK,EAASP,EAAKa,MAAMR,EAASD,GAC7BC,EAAUD,EAAO,M,CAXnB,MAAQH,IAAMA,EAAO,KAgBzB,IAAIa,EAAY,WACdT,EAAUU,KACVX,EAAOY,UACPV,EAAYI,KAAKC,MACjB,IAAIM,EAAUf,IAAcC,EAO5B,OANKA,IAASA,EAAUS,WAAWJ,EAAOP,IACtCgB,IACFV,EAASP,EAAKa,MAAMR,EAASD,GAC7BC,EAAUD,EAAO,MAGZG,C,EAoBT,OAjBAO,EAAUI,MAAQ,WACZf,IACFgB,aAAahB,GACbA,EAAU,K,EAIdW,EAAUM,MAAQ,WACZjB,IACFI,EAASP,EAAKa,MAAMR,EAASD,GAC7BC,EAAUD,EAAO,KAEjBe,aAAahB,GACbA,EAAU,K,EAIPW,C,CAITf,EAASsB,SAAWtB,EAEpBuB,EAAiBvB,E,IFlCbwB,E,sBAMWC,I,OAAAA,EAAfC,EAAAjC,EAAA,CAAAiC,EAAAC,GAAAC,MAAA,SAAAC,EAA4BC,G,IAYpBC,EAC6BC,EAA3BC,EAASC,EACXC,EAaSC,EAATC,EACAC,EASEC,E,qEApCRT,EAAMU,iBACNhB,EAAcM,EAAMW,cAAcC,YAAYC,MAAMC,OACpDlD,IACK8B,EAAW,C,sBACdqB,EAAAC,SAASC,UAAUC,IAAI,cACvBnC,YAAW,WACTgC,EAAAC,SAASC,UAAUE,OAAO,a,GACzB,KACHnD,I,4CAGmB,EAAAoD,EAAAC,iBAAgB3B,G,WAA/BO,EAAMqB,EAAAC,KACuBrB,EAAAD,EAAOuB,KAAlCrB,EAA2BD,EAA3BC,QAASC,EAAkBF,EAAlBE,cACXC,GAAoB,EAAAoB,EAAAC,uBAAsBtB,GAEzB,IAAnBD,EAAQwB,OAAY,C,uBACtBZ,EAAAC,SAASC,UAAUC,IAAI,cACvBnC,YAAW,WACTgC,EAAAC,SAASC,UAAUE,OAAO,a,GACzB,KACHnD,I,2BAIFA,IACA+C,EAAAC,SAASC,UAAUE,OAAO,cACpBZ,EAA0B,QAAjBD,GAAA,EAAAsB,EAAAC,0BAAiB,IAAjBvB,IAAqB,GAC9BE,GAAY,EAAAsB,EAAAC,eAAc5B,EAASI,GACzCQ,EAAAiB,QAAQC,UAAYzB,EACpBO,EAAAmB,cAAcD,UAAY,GAI1B,IACER,EAAAU,WAAWC,QACXX,EAAAU,WAAWE,IAAI,YAAaZ,EAAAa,mBACtB7B,EAAmB,IAAIb,EAAA2C,GAAJ,CACvBxB,EAAAyB,oBACAnC,IAEegC,IAAI,YAAaI,GAClChC,EAAiBiC,GAAG,YAAaD,E,CACjC,MAAOE,GACPC,QAAQC,IAAIF,E,8CA5CW3D,MAAAE,KAAAC,U,UAgDZsD,EAAuBzC,G,OAAvB8C,EAAsB9D,MAAAE,KAAAC,U,UAAtB2D,I,OAAAA,EAAflD,EAAAjC,EAAA,CAAAiC,EAAAC,GAAAC,MAAA,SAAAC,EAAsCC,G,IAC9B+C,EAEA9C,EACEE,EAEOG,EAATC,EACAC,E,yEANAuC,EAAc/C,EAAMgD,KAC1BC,aAAaC,QAAQ,OAAQH,G,UACR,EAAA3B,EAAAC,iBAAgB3B,EAAaqD,G,OAA5C9C,EAAMqB,EAAAC,KACNpB,EAAcF,EAAOuB,KAAnBrB,QACRyC,QAAQC,IAAI5C,EAAOuB,MACbjB,EAA0B,QAAjBD,GAAA,EAAAsB,EAAAC,0BAAiB,IAAjBvB,IAAqB,GAC9BE,GAAY,EAAAsB,EAAAC,eAAc5B,EAASI,GACzCQ,EAAAiB,QAAQC,UAAYzB,EACpB3C,SAASsF,gBAAgBC,SAAS,CAAEC,IAAK,EAAGC,SAAU,W,6CATnBtE,MAAAE,KAAAC,U,UAYtBoE,I,OAAAA,EAAf3D,EAAAjC,EAAA,CAAAiC,EAAAC,GAAAC,MAAA,SAAAC,EAA2BC,G,IAUnBC,EACEE,E,qEAVRY,EAAAmB,cAAcjB,UAAUE,OAAO,mBAC/BJ,EAAAmB,cAAcD,UAAY,GAC1BvC,EAAcM,EAAMwD,OAAO3C,MAAMC,OAEjB,C,sBACdC,EAAAmB,cAAcjB,UAAUC,IAAI,mB,2CAIT,EAAAE,EAAAC,iBAAgB3B,G,UAA/BO,EAAMqB,EAAAC,KAEW,KADjBpB,EAAcF,EAAOuB,KAAnBrB,SACIwB,OAAY,C,uBACtBZ,EAAAC,SAASC,UAAUC,IAAI,cACvBnC,YAAW,WACTgC,EAAAC,SAASC,UAAUE,OAAO,a,GACzB,K,2BAGLJ,EAAAmB,cAAcnE,mBACZ,YACA0F,EAAetD,EAAQuD,MAAM,EAAG,K,6CArBV1E,MAAAE,KAAAC,U,CAyB1B,SAASsE,EAAeE,GACtB,IAAIC,EAAS,GAOb,OANAD,EAAKE,SACH,SAAAC,G,IAAGC,EAAKD,EAALC,MAAOC,EAAEF,EAAFE,GAAIC,EAAYH,EAAZG,a,OACXL,GAAU,wCAA8CM,OAANF,EAAG,KACpDE,OADuDH,EAAM,iCAE9DG,OADCD,EAAeA,EAAaP,MAAM,EAAG,GAAK,UAC3C,gB,IAEEE,C,YAjGT7C,EAAAoD,cAAcC,iBAAiB,U,SAIHpE,G,OAAbL,EAAYX,MAAAE,KAAAC,U,IAH3B4B,EAAAsD,eAAeD,iBAAiB,SAAS,EAAA3E,EAAAD,W,SA+DdQ,G,OAAZuD,EAAWvE,MAAAE,KAAAC,U,GA/DqC,MAC/D4B,EAAAmB,cAAckC,iBAAiB,QAASE,EAAAC,e,+DDzBxC1G,SAASuG,iBAAiB,oBAAoB,YAC5C,EAAAxC,EAAA4C,oBACA,EAAAC,EAAAC,+BACA3D,EAAAiB,QAAQoC,iBAAiB,QAASE,EAAAC,eAClCI,EAAAC,MAAMR,oBACN,EAAA3G,EAAAoH,W","sources":["src/index.js","src/js/functions/searchFilm.js","src/js/components/spinner.js","node_modules/debounce/index.js"],"sourcesContent":["import { darkmode } from './js/functions/darkmode';\nimport './js/functions/pagination';\n\nimport { moviesListMarkupFirstRender } from './js/functions/render-home-page';\nimport { setGenreOptions } from './js/functions/local-storage';\nimport { openMovieInfo } from './js/functions/openMovieInfo';\nimport { listRef } from './js/refs/refs';\nimport './js/functions/searchFilm';\nimport './js/functions/login';\nimport './js/functions/pagination';\nimport './js/functions/developersModal';\nimport { btnUp } from './js/components/to-top-button';\nimport { darkmode } from './js/functions/darkmode';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setGenreOptions();\n  moviesListMarkupFirstRender();\n  listRef.addEventListener('click', openMovieInfo);\n  btnUp.addEventListener();\n  darkmode();\n});\n","import Pagination from 'tui-pagination';\n// import 'tui-pagination/dist/tui-pagination.css';\nimport {\n  searchFormRef,\n  listRef,\n  paginationContainer,\n  errorRef,\n  searchListRef,\n  searchInputRef,\n} from '../refs/refs';\nimport { getBySearchName } from '../api/get-api';\nimport { makeMovieList } from '../components/movie-cards';\nimport { getGenreOptions } from './local-storage';\nimport {\n  pagination,\n  updateMoviesList,\n  makePaginationOptions,\n} from '../functions/pagination';\nimport { startSpinner, stopSpinner } from '../components/spinner';\nimport { debounce } from 'debounce';\nimport { openMovieInfo } from './openMovieInfo';\nimport { moviesListMarkupFirstRender } from './render-home-page';\n\n// const options = makePaginationOptions();\n\n// export const pagination = new Pagination(paginationContainer, options);\n\n// pagination.on('afterMove', updateMoviesList);\n\n// export async function updateMoviesList(event) {\n//   const currentPage = event.page;\n//   await moviesListMarkupFirstRender(currentPage);\n//   document.documentElement.scrollTo({ top: 0, behavior: 'smooth' });\n// }\n\nlet searchValue;\n\nsearchFormRef.addEventListener('submit', onFormSubmit);\nsearchInputRef.addEventListener('input', debounce(inputSearch, 700));\nsearchListRef.addEventListener('click', openMovieInfo);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  searchValue = event.currentTarget.searchQuery.value.trim();\n  startSpinner();\n  if (!searchValue) {\n    errorRef.classList.add('show-error');\n    setTimeout(() => {\n      errorRef.classList.remove('show-error');\n    }, 3000);\n    stopSpinner();\n    return;\n  }\n  const movies = await getBySearchName(searchValue);\n  const { results, total_results } = movies.data;\n  const paginationOptions = makePaginationOptions(total_results);\n\n  if (results.length === 0) {\n    errorRef.classList.add('show-error');\n    setTimeout(() => {\n      errorRef.classList.remove('show-error');\n    }, 3000);\n    stopSpinner();\n    return;\n  }\n\n  stopSpinner();\n  errorRef.classList.remove('show-error');\n  const genres = getGenreOptions() ?? [];\n  const movieList = makeMovieList(results, genres);\n  listRef.innerHTML = movieList;\n  searchListRef.innerHTML = '';\n\n  // Pagination part\n\n  try {\n    pagination.reset();\n    pagination.off('afterMove', updateMoviesList);\n    const paginationByName = new Pagination(\n      paginationContainer,\n      paginationOptions\n    );\n    paginationByName.off('afterMove', updateMoviesListByName);\n    paginationByName.on('afterMove', updateMoviesListByName);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function updateMoviesListByName(event) {\n  const currentPage = event.page;\n  localStorage.setItem('page', currentPage);\n  const movies = await getBySearchName(searchValue, currentPage);\n  const { results } = movies.data;\n  console.log(movies.data);\n  const genres = getGenreOptions() ?? [];\n  const movieList = makeMovieList(results, genres);\n  listRef.innerHTML = movieList;\n  document.documentElement.scrollTo({ top: 0, behavior: 'smooth' });\n}\n\nasync function inputSearch(event) {\n  searchListRef.classList.remove('visually-hidden');\n  searchListRef.innerHTML = '';\n  searchValue = event.target.value.trim();\n\n  if (!searchValue) {\n    searchListRef.classList.add('visually-hidden');\n    return;\n  }\n\n  const movies = await getBySearchName(searchValue);\n  const { results } = movies.data;\n  if (results.length === 0) {\n    errorRef.classList.add('show-error');\n    setTimeout(() => {\n      errorRef.classList.remove('show-error');\n    }, 3000);\n    return;\n  }\n  searchListRef.insertAdjacentHTML(\n    'beforeend',\n    makeSearchList(results.slice(0, 5))\n  );\n}\n\nfunction makeSearchList(list) {\n  let markup = '';\n  list.forEach(\n    ({ title, id, release_date }) =>\n      (markup += `<li class=\"search-list-item\" data-id=${id}>${title} <span class=\"release-date\">(${\n        release_date ? release_date.slice(0, 4) : 'no info'\n      })</span></li>`)\n  );\n  return markup;\n}\n","\nconst spinner = ' <div class=\"container__spinner\"><h2>Looking for the best options</h2>  <div class=\"wrapper\"><div class=\"loader\"><div class=\"spinner\"></div>            </div><div class=\"loader\"><div class=\"spinner\"></div></div><div class=\"loader\"> <div class=\"spinner\"></div></div><div class=\"loader\"><div class=\"spinner\"></div></div><div class=\"loader\"><div class=\"spinner\"></div></div> <div class=\"loader\"><div class=\"spinner\"></div></div><div class=\"loader\"><div class=\"spinner\"></div></div><div class=\"loader\"><div class=\"spinner\"></div></div></div></div>'\n\nexport function startSpinner  () {\ndocument.querySelector('main').insertAdjacentHTML('afterbegin',spinner)\n}\n\nexport function stopSpinner () {\ndocument.querySelector('main').removeChild(document.querySelector('.container__spinner'))\n}","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n"],"names":["$5p8r0","parcelRequire","$bpxeT","$46c8e25deb05855d$export$fa245027f865773","document","querySelector","insertAdjacentHTML","$46c8e25deb05855d$export$a6afc8d060505c9d","removeChild","$004cd6322d5b1502$var$debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","last","Date","now","setTimeout","apply","debounced","this","arguments","callNow","clear","clearTimeout","flush","debounce","$004cd6322d5b1502$exports","$cafa1dcb5a2b6e48$var$searchValue","$cafa1dcb5a2b6e48$var$_onFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","event","movies","_data","results","total_results","paginationOptions","ref","genres","movieList","paginationByName","preventDefault","currentTarget","searchQuery","value","trim","$cqmI4","errorRef","classList","add","remove","$eopHt","getBySearchName","_ctx","sent","data","$1GZuu","makePaginationOptions","length","$lvC14","getGenreOptions","$dYN6e","makeMovieList","listRef","innerHTML","searchListRef","pagination","reset","off","updateMoviesList","$1VFfL","paginationContainer","$cafa1dcb5a2b6e48$var$updateMoviesListByName","on","error","console","log","$cafa1dcb5a2b6e48$var$_updateMoviesListByName","currentPage","page","localStorage","setItem","documentElement","scrollTo","top","behavior","$cafa1dcb5a2b6e48$var$_inputSearch","target","$cafa1dcb5a2b6e48$var$makeSearchList","slice","list","markup","forEach","param","title","id","release_date","concat","searchFormRef","addEventListener","searchInputRef","$cP0sx","openMovieInfo","setGenreOptions","$jgLRi","moviesListMarkupFirstRender","$9iAID","btnUp","darkmode"],"version":3,"file":"index.62d21691.js.map"}