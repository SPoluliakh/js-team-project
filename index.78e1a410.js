function e(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},n=r.parcelRequired870;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var r=i[e];delete i[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,r){i[e]=r},r.parcelRequired870=n);var s=n("AFyA5");n("kKZR4");var a=n("5Y3BN"),o=n("1CpbH"),l=n("1699B"),d=n("3ILHO"),c=n("fb9GJ"),v=(d=n("3ILHO"),n("6TDp9")),u=n("bnlKQ"),f=(o=n("1CpbH"),n("kKZR4"));function p(){document.querySelector("main").insertAdjacentHTML("afterbegin",' <div class="container__spinner"><h2>Looking for the best options</h2>  <div class="wrapper"><div class="loader"><div class="spinner"></div>            </div><div class="loader"><div class="spinner"></div></div><div class="loader"> <div class="spinner"></div></div><div class="loader"><div class="spinner"></div></div><div class="loader"><div class="spinner"></div></div> <div class="loader"><div class="spinner"></div></div><div class="loader"><div class="spinner"></div></div><div class="loader"><div class="spinner"></div></div></div></div>')}function m(){document.querySelector("main").removeChild(document.querySelector(".container__spinner"))}var h;function L(e,r,t){var i,n,s,a,o;function l(){var d=Date.now()-a;d<r&&d>=0?i=setTimeout(l,r-d):(i=null,t||(o=e.apply(s,n),s=n=null))}null==r&&(r=100);var d=function(){s=this,n=arguments,a=Date.now();var d=t&&!i;return i||(i=setTimeout(l,r)),d&&(o=e.apply(s,n),s=n=null),o};return d.clear=function(){i&&(clearTimeout(i),i=null)},d.flush=function(){i&&(o=e.apply(s,n),s=n=null,clearTimeout(i),i=null)},d}L.debounce=L,h=L;l=n("1699B");let g;async function R(e){const r=e.page;localStorage.setItem("page",r);const t=await(0,v.getBySearchName)(g,r),{results:i}=t.data;console.log(t.data);const n=(0,o.getGenreOptions)()??[],s=(0,u.makeMovieList)(i,n);d.listRef.innerHTML=s,document.documentElement.scrollTo({top:0,behavior:"smooth"})}n("5Y3BN"),d.searchFormRef.addEventListener("submit",(async function(r){if(r.preventDefault(),g=r.currentTarget.searchQuery.value.trim(),p(),!g)return d.errorRef.classList.add("show-error"),setTimeout((()=>{d.errorRef.classList.remove("show-error")}),3e3),void m();const t=await(0,v.getBySearchName)(g),{results:i,total_results:n}=t.data,s=(0,f.makePaginationOptions)(n);if(0===i.length)return d.errorRef.classList.add("show-error"),setTimeout((()=>{d.errorRef.classList.remove("show-error")}),3e3),void m();m(),d.errorRef.classList.remove("show-error");const a=(0,o.getGenreOptions)()??[],l=(0,u.makeMovieList)(i,a);d.listRef.innerHTML=l,d.searchListRef.innerHTML="";try{f.pagination.reset(),f.pagination.off("afterMove",f.updateMoviesList);const r=new(e(c))(d.paginationContainer,s);r.off("afterMove",R),r.on("afterMove",R)}catch(e){console.log(e)}})),d.searchInputRef.addEventListener("input",(0,h.debounce)((async function(e){if(d.searchListRef.classList.remove("visually-hidden"),d.searchListRef.innerHTML="",g=e.target.value.trim(),!g)return void d.searchListRef.classList.add("visually-hidden");const r=await(0,v.getBySearchName)(g),{results:t}=r.data;if(0===t.length)return d.errorRef.classList.add("show-error"),void setTimeout((()=>{d.errorRef.classList.remove("show-error")}),3e3);d.searchListRef.insertAdjacentHTML("beforeend",function(e){let r="";return e.forEach((({title:e,id:t,release_date:i})=>r+=`<li class="search-list-item" data-id=${t}>${e} <span class="release-date">(${i?i.slice(0,4):"no info"})</span></li>`)),r}(t.slice(0,5)))}),700)),d.searchListRef.addEventListener("click",l.openMovieInfo),n("kKZR4"),n("1TldD");var y=n("aOITw");s=n("AFyA5");document.addEventListener("DOMContentLoaded",(()=>{(0,o.setGenreOptions)(),(0,a.moviesListMarkupFirstRender)(),d.listRef.addEventListener("click",l.openMovieInfo),y.btnUp.addEventListener(),(0,s.darkmode)()}));
//# sourceMappingURL=index.78e1a410.js.map
