!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequired870;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequired870=a);var s=a("5p8r0");a("1GZuu");var i,o=a("jgLRi"),u=a("lvC14"),c=a("9UsRv"),l=a("cqmI4"),f=a("bpxeT"),p=a("2TvXO"),d=a("1VFfL"),v=(l=a("cqmI4"),a("eopHt")),h=a("dYN6e"),L=(u=a("lvC14"),a("1GZuu")),m=a("64MGL");function R(e,t,r){var n,a,s,i,o;function u(){var c=Date.now()-i;c<t&&c>=0?n=setTimeout(u,t-c):(n=null,r||(o=e.apply(s,a),s=a=null))}null==t&&(t=100);var c=function(){s=this,a=arguments,i=Date.now();var c=r&&!n;return n||(n=setTimeout(u,t)),c&&(o=e.apply(s,a),s=a=null),o};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(o=e.apply(s,a),s=a=null,clearTimeout(n),n=null)},c}R.debounce=R,i=R;var g;c=a("9UsRv");function y(){return(y=e(f)(e(p).mark((function t(r){var n,a,s,i,o,c,f,R,y;return e(p).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),g=r.currentTarget.searchQuery.value.trim(),(0,m.startSpinner)(),g){t.next=6;break}return(0,m.stopSpinner)(),t.abrupt("return");case 6:return t.next=8,(0,v.getBySearchName)(g);case 8:if(n=t.sent,a=n.data,s=a.results,i=a.total_results,o=(0,L.makePaginationOptions)(i),0!==s.length){t.next=16;break}return l.errorRef.classList.add("show-error"),setTimeout((function(){l.errorRef.classList.remove("show-error")}),3e3),(0,m.stopSpinner)(),t.abrupt("return");case 16:(0,m.stopSpinner)(),l.errorRef.classList.remove("show-error"),f=null!==(c=(0,u.getGenreOptions)())&&void 0!==c?c:[],R=(0,h.makeMovieList)(s,f),l.listRef.innerHTML=R,l.searchListRef.innerHTML="";try{L.pagination.reset(),L.pagination.off("afterMove",L.updateMoviesList),(y=new(e(d))(l.paginationContainer,o)).off("afterMove",b),y.on("afterMove",b)}catch(e){console.log(e)}case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return(w=e(f)(e(p).mark((function t(r){var n,a,s,i,o,c;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.page,localStorage.setItem("page",n),e.next=4,(0,v.getBySearchName)(g,n);case 4:a=e.sent,s=a.data.results,console.log(a.data),o=null!==(i=(0,u.getGenreOptions)())&&void 0!==i?i:[],c=(0,h.makeMovieList)(s,o),l.listRef.innerHTML=c,document.documentElement.scrollTo({top:0,behavior:"smooth"});case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function M(){return(M=e(f)(e(p).mark((function t(r){var n,a;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.searchListRef.classList.remove("visually-hidden"),l.searchListRef.innerHTML="",l.backdropRef.style.display="block",g=r.target.value.trim()){e.next=7;break}return l.searchListRef.classList.add("visually-hidden"),e.abrupt("return");case 7:return(0,m.startSpinner)(),e.next=10,(0,v.getBySearchName)(g);case 10:if(n=e.sent,(0,m.stopSpinner)(),0!==(a=n.data.results).length){e.next=17;break}return l.errorRef.classList.add("show-error"),setTimeout((function(){l.errorRef.classList.remove("show-error")}),3e3),e.abrupt("return");case 17:l.searchListRef.insertAdjacentHTML("beforeend",k(a.slice(0,5)));case 18:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function k(e){var t="";return e.forEach((function(e){var r=e.title,n=e.id,a=e.release_date;return t+='<li class="search-list-item" data-id='.concat(n,">").concat(r,' <span class="release-date">(').concat(a?a.slice(0,4):"no info",")</span></li>")})),t}l.searchFormRef.addEventListener("submit",(function(e){return y.apply(this,arguments)})),l.searchInputRef.addEventListener("input",(0,i.debounce)((function(e){return M.apply(this,arguments)}),500)),l.searchListRef.addEventListener("click",c.openMovieInfo),l.cleanButtonRef.addEventListener("click",(function(){l.searchInputRef.value="",l.searchListRef.innerHTML="",l.searchInputRef.focus()})),a("5clMQ"),a("1GZuu"),a("2Srh3");var T=a("9iAID");s=a("5p8r0");document.addEventListener("DOMContentLoaded",(function(){(0,u.setGenreOptions)(),(0,o.moviesListMarkupFirstRender)(),l.listRef.addEventListener("click",(function(e){l.backdropRef.style.display="block",(0,c.openMovieInfo)(e)})),T.btnUp.addEventListener(),(0,s.darkmode)()}))}();
//# sourceMappingURL=index.955760aa.js.map
